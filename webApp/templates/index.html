<!DOCTYPE html>
<html lang="en-US">
  <head>
    <title>CSC 394 - Software Projects</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSS -->
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">                                           <!-- W3.CSS -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">                                 <!-- Google Fonts -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <!-- Font Awesome 4 -->
    <link rel="stylesheet" href="../static/index.css">                                                                <!-- Our CSS -->
    <link rel="stylesheet" href="../static/index.css">                                                                <!-- Our CSS -->

    <!-- JavaScript -->
    <script src="https://kit.fontawesome.com/f15e7c6ba2.js" crossorigin="anonymous"></script>                         <!-- Font Awesome 5 -->
    <script src="https://www.w3schools.com/lib/w3.js"></script>                                                       <!-- W3.JS -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>                                               <!-- Chart.js -->
    <!-- Our JavaScript -->
    <script src="../static/index.js"></script>
    <script src="../static/graph.mjs" type="module"></script>

    <script type="module">
      import { graphInit, drawGraph } from '../static/graph.mjs';

      // for job recommendations
      document.getElementById('refresh').addEventListener('click', function(e) {
        // var sliders = document.getElementsByClassName('slider');

        fetch('/jobs?Web=1&Python=2&R=3&SQL=4')
          .then(function(response) {
            return response.json();
          })
          .then(function(data) {
            updateJobs(data);
          });
      });

      function updateJobs(data) {
        var table = document.getElementById('table');
        table.classList.remove("w3-hide");

        var len = table.rows.length;
        for (var i = 1; i < len; ++i)
          table.deleteRow(1);

        for (var obj of data) {
          var row = table.insertRow(-1);

          for (let [i, prop] of obj.entries()) {
            var cell = row.insertCell(-1);

            if (i !== obj.length - 1) // not the last element
              cell.textContent = prop;
            else {
              cell.innerHTML = '<i class="fas fa-external-link-alt"></i>';
              row.onclick = function(e) {
                window.open(prop);
              };
            }
          }
        }
      }

      // for Chart.js
      var keywords  = {{keywords|tojson}};
      var pays      = {{pays|tojson}};
      var locations = {{locations|tojson}};

      window.addEventListener('load', graphInit(keywords));
      document.getElementById('chartSelect').addEventListener('change', function(e) {
        switch(e.target.value) {
          case 'keywords':
            drawGraph(keywords);
            break;
          case 'pays':
            drawGraph(pays);
            break;
          case 'locations':
            drawGraph(locations);
            break;
        }
      });
    </script>
  </head>

  <body class="w3-black">

    <!-- Sidebar (hidden on phones) -->
    <nav class="w3-sidebar w3-bar-block w3-small w3-hide-small w3-center">
      <a href="#" class="w3-bar-item w3-button w3-padding-large w3-black">
        <i class="fa fa-home w3-xxlarge"></i>
        <p>HOME</p>
      </a>
      <a href="#skills" class="w3-bar-item w3-button w3-padding-large w3-hover-black">
        <i class="fa fa-check-square-o w3-xxlarge"></i>
        <p>SKILLS</p>
      </a>
      <a href="#data" class="w3-bar-item w3-button w3-padding-large w3-hover-black">
        <i class="fa fa-line-chart w3-xxlarge"></i>
        <p>DATA</p>
      </a>
      <a href="#about" class="w3-bar-item w3-button w3-padding-large w3-hover-black">
        <i class="fa fa-info w3-xxlarge"></i>
        <p>ABOUT</p>
      </a>
    </nav>

    <!-- Navbar (hidden on tablets & PCs) -->
    <div class="w3-top w3-hide-large w3-hide-medium" id="myNavbar">
      <div class="w3-bar w3-black w3-opacity w3-hover-opacity-off w3-center w3-small">
        <a href="#" class="w3-bar-item w3-button" style="width: 25% !important;">HOME</a>
        <a href="#skills" class="w3-bar-item w3-button" style="width: 25% !important;">SKILLS</a>
        <a href="#data" class="w3-bar-item w3-button" style="width: 25% !important;">DATA</a>
        <a href="#about" class="w3-bar-item w3-button" style="width: 25% !important;">ABOUT</a>
      </div>
    </div>

    <main class="w3-padding-large">

      <!-- Home -->
      <header class="w3-container w3-padding-32 w3-center w3-black" id="home">
        <h1 class="w3-jumbo">Software Projects.</h1>
        <p>A job aggregator for data scientists.</p>
      </header>

      <!-- Your Skills -->
      <div class="w3-content w3-justify w3-text-grey w3-padding-32" id="skills">
        <p class="w3-center w3-xlarge" style="margin-bottom:50px;">In order to best tailor our search results, please evaluate your skillset.</p>
        <h3 class="w3-padding-16 w3-text-light-grey">Technologies</h3>

        <div id="slider-container" class="w3-margin-bottom">
          <p style="letter-spacing: 2px;">HTML, CSS, &amp; JavaScript</p>
          <input type="range" min="1" max="10" value="1" class="slider w3-show-inline-block w3-round-large" oninput="slider(this.value, 1)">
          <span class="w3-badge w3-xlarge w3-white" id="slider1">{% raw %}{{slider1}}{% endraw %}</span>

          <p style="letter-spacing: 2px;">Python</p>
          <input type="range" min="1" max="10" value="1" class="slider w3-show-inline-block w3-round-large" oninput="slider(this.value, 2)">
          <span class="w3-badge w3-xlarge w3-white" id="slider2">{% raw %}{{slider2}}{% endraw %}</span>

          <p style="letter-spacing: 2px;">R</p>
          <input type="range" min="1" max="10" value="1" class="slider w3-show-inline-block w3-round-large" oninput="slider(this.value, 3)">
          <span class="w3-badge w3-xlarge w3-white" id="slider3">{% raw %}{{slider3}}{% endraw %}</span>

          <p style="letter-spacing: 2px;">SQL</p>
          <input type="range" min="1" max="10" value="1" class="slider w3-show-inline-block w3-round-large" oninput="slider(this.value, 4)">
          <span class="w3-badge w3-xlarge w3-white" id="slider4">{% raw %}{{slider4}}{% endraw %}</span>
        </div>

        <h3 class="w3-padding-16 w3-text-light-grey w3-margin-top">Summary</h3>
        <div class="w3-row w3-center w3-padding-32 w3-section w3-light-grey" id="summary">
          <div class="w3-quarter w3-section">
            <i class="fab fa-html5 w3-xxxlarge tooltip">
              <span class="tooltiptext w3-small" style="left: 150%; width: 50px;">HTML</span>
            </i>
            <i class="fab fa-css3-alt w3-xxxlarge w3-margin-left tooltip">
              <span class="tooltiptext w3-small" style="left: 155%; width: 45px;">CSS</span>
            </i>
            <i class="fab fa-js-square w3-xxxlarge w3-margin-left tooltip">
              <span class="tooltiptext w3-small" style="left: 105%; width: 75px;">JavaScript</span>
            </i><br>
            <p class="w3-large" id="skill1">{% raw %}{{skill1}}{% endraw %}</p>
          </div>

          <div class="w3-quarter w3-section">
            <i class="fab fa-python w3-xxxlarge tooltip">
              <span class="tooltiptext w3-small" style="left: 115%; width: 65px;">Python</span>
            </i><br>
            <p class="w3-large" id="skill2">{% raw %}{{skill2}}{% endraw %}</p>
          </div>

          <div class="w3-quarter w3-section">
            <i class="fab fa-r-project w3-xxxlarge tooltip">
              <span class="tooltiptext w3-small" style="left: 140%; width: 30px;">R</span>
            </i><br>
            <p class="w3-large" id="skill3">{% raw %}{{skill3}}{% endraw %}</p>
          </div>

          <div class="w3-quarter w3-section" style="margin-bottom: 50px !important;">
            <i class="fas fa-database w3-xxxlarge tooltip">
              <span class="tooltiptext w3-small" style="left: 140%; width: 45px; font-weight: normal;">SQL</span>
            </i><br>
            <p class="w3-large" id="skill4">{% raw %}{{skill4}}{% endraw %}</p>
          </div>

          <p class="w3-xlarge" id="role"><b>Expected role:</b>{% raw %}{{role}}{% endraw %}</p>
        </div>

        <div class="w3-row w3-center w3-padding-32 w3-section w3-light-grey" style="width: 95.5%; position: relative;">
          <i id="refresh" class="fas fa-sync w3-hover-opacity" style="position: absolute; right: 2.5%; font-size: 1.5em; cursor: pointer;"></i>
          <h3 style="margin-top: 0;">Job postings curated for you:</h3>
          <table class="w3-table w3-table-all w3-hoverable w3-hide" id="table">
            <tr>
              <th>position</th>
              <th>company</th>
              <th>location</th>
              <th></th>
            </tr>
          </table>
        </div>
      </div>

      <!-- Data -->
      <div class="w3-content w3-justify w3-text-grey w3-padding-32" id="data">
        <h2 class="w3-text-light-grey" style="margin-bottom: 0 !important;">Our Findings</h2>
        <hr style="width:195px; margin-top: 5px" class="w3-opacity">
      </div>

      <select id="chartSelect">
        <option value="keywords">Skills</option>
        <option value="pays">Pay</option>
        <option value="locations">Locations</option>
      </select>
      <canvas id="chart"></canvas>

      <!-- About Us -->
      <div class="w3-padding-64 w3-content w3-text-grey" id="about">
        <h2 class="w3-text-light-grey" style="margin-bottom: 0; !important">About Us</h2>
        <hr style="width: 140px; margin-top: 5px;" class="w3-opacity">
        <p>
           Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
           Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
           Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
           Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
           Curabitur pretium tincidunt lacus. Nulla gravida orci a odio.
           Nullam varius, turpis et commodo pharetra, est eros bibendum elit, nec luctus magna felis sollicitudin mauris.
           Integer in mauris eu nibh euismod gravida. Duis ac tellus et risus vulputate vehicula. Donec lobortis risus a elit.
           Etiam tempor. Ut ullamcorper, ligula eu tempor congue, eros est euismod turpis, id tincidunt sapien risus a quam.
           Maecenas fermentum consequat mi. Donec fermentum. Pellentesque malesuada nulla a mi.
           Duis sapien sem, aliquet nec, commodo eget, consequat quis, neque.
           Aliquam faucibus, elit ut dictum aliquet, felis nisl adipiscing sapien, sed malesuada diam lacus eget erat.
           Cras mollis scelerisque nunc. Nullam arcu. Aliquam consequat. Curabitur augue lorem, dapibus quis, laoreet et, pretium ac, nisi.
           Aenean magna nisl, mollis quis, molestie eu, feugiat in, orci. In hac habitasse platea dictumst.
        </p>
      </div>

      <footer class="w3-content w3-padding-64 w3-text-grey w3-xlarge">
        <p class="w3-medium">Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank" class="w3-hover-text-green">W3.CSS</a>
        &amp; <a href="https://www.w3schools.com/w3js/default.asp" target="_blank" class="w3-hover-text-green">W3.JS</a>.</p>
      </footer>
    </main>
  </body>
</html>
